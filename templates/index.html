<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <script src="/static/js/jquery.min.js"></script>
    <link rel="stylesheet" href="/static/css/index.css">
    <link rel="stylesheet" href="/static/css/mui.min.css">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <script src="/static/js/mui.min.js"></script>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <title>Monitor</title>
</head>
<body>

<h1 id="head">Monitor</h1>

{#upper right region's buttons#}
<div id="button">
    {% if state == 'root' %}
        <a href="{% url 'Manage' %}" class="mui-btn mui-btn--primary">Manage</a>
        <a href="{% url 'Account' %}" class="mui-btn mui-btn--primary">account</a>
        <form action="{% url 'Home' %}" method="get">
            <input type="submit" class="mui-btn mui-btn--primary" name="logout" value="logout">
        </form>
    {% elif state == 'normal' %}
        <a href="{% url 'Account' %}" class="mui-btn mui-btn--primary">account</a>
        <form action="{% url 'Home' %}" method="get">
            <input type="submit" class="mui-btn mui-btn--primary" name="logout" value="logout">
        </form>
    {% elif state == 'logout' %}
        <a href="{% url 'Login' %}" class="mui-btn mui-btn--primary">login</a>
        <a href="{% url 'Signup' %}" class="mui-btn mui-btn--primary">signup</a>
    {% endif %}
    <form class="mui-form" action="{% url 'Home' %}" method="post">
        <div class="mui-textfield top-form">
            <input type="text" placeholder="Camera IP, 0 for local camera" name="camera">
        </div>
        <button type="submit" onclick="fetching()" class="mui-btn mui-btn--raised top-form">Submit</button>
    </form>
</div>

{#video region, generated by stream#}
<img src="{% url 'Video' %}">

{#waiting for linking to new camera#}
<div class="modal fade" id="Fetch" tabindex="-1" role="dialog" aria-labelledby="modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal"><b>Please wait for a moment</b></h3>
            </div>
            <div class="modal-body" style="text-align: center">
                <div>
                    <img src="/static/img/loading.gif"/>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    let error = "{{ error }}";
    if(error !== ""){
        window.alert(error);
    }
    function fetching() {
        $('#Fetch').modal({
            keyboard: false,
            backdrop: 'static'
        });
        $('#Fetch').modal('show');
    }
</script>
</body>
</html>